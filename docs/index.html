<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EchoBreak</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="images/favicon.png">
</head>

<body>

    <!-- Header -->
    <header>
        <a href="personal_account.html" id="logo-link" class="active">
            <img src="images/logo.png" alt="EchoBreak Logo" class="logo">
        </a>
        <nav>
            <ul>
                <space></space>
                <li><a href="about.html">–û –Ω–∞—Å</a></li>
                <li><a href="projects.html">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
                <li><a href="fanfics.html">–ö–æ–º—å—é–Ω–∏—Ç–∏</a></li>
                <li><a href="crypto.html">–ö—Ä–∏–ø—Ç–∞</a></li>
            </ul>
        </nav>
    </header>

    <!-- Separator Line -->
    <div class="separator"></div>

    <!-- Main Content -->
    <main>
        <!-- New Year Countdown -->
        <div id="ny-countdown" class="countdown-above-title"></div>

        <h1>EchoBreak</h1>
        <h2>–ì–ª–∞–≤–Ω–∞—è</h2>
        <h3>–≠—Ç–æ—Ç —Å–∞–π—Ç –±—ã–ª —Å–¥–µ–ª–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö!</h3>

        <!-- Terminal-style Interactive Prompt -->
        <div id="terminal" class="terminal">
            <div id="terminal-output" class="terminal-output"></div>
            <div class="terminal-input-line">
                <span class="prompt">> </span>
                <input type="text" id="terminal-input" autocomplete="off" spellcheck="false">
            </div>
        </div>

        <!-- Countdown to May 31 -->
        <div id="may-countdown" class="countdown-below-terminal"></div>

        <!-- Countdown to next holiday -->
        <div id="holiday-countdown" class="countdown-below-terminal"></div>
    </main>

    <!-- Footer -->
    <footer>
        <p>EchoBreak, 2025</p>
    </footer>

    <!-- Falling Snow Container -->
    <div id="snow-container"></div>

    <script>
        const snowContainer = document.getElementById('snow-container');
        const flakes = ['*', '¬∑', '‚ú¶', '‚úß', '+', '‚àò', '‚Ä¢'];
        const snowCount = 35;

        snowContainer.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        `;

        for (let i = 0; i < snowCount; i++) {
            const flake = document.createElement('span');
            flake.textContent = flakes[Math.floor(Math.random() * flakes.length)];
            const size = 8 + Math.random() * 10;
            const left = Math.random() * 100;
            const duration = 6 + Math.random() * 10;
            const opacity = 0.4 + Math.random() * 0.6;
            const delay = Math.random() * 5;

            flake.style.cssText = `
                position: absolute;
                top: -20px;
                left: ${left}vw;
                font-size: ${size}px;
                opacity: ${opacity};
                color: #9ab5ff;
                font-family: monospace;
                user-select: none;
                animation: snowfall ${duration}s linear infinite;
                animation-delay: ${delay}s;
            `;
            snowContainer.appendChild(flake);
        }

        // === COUNTDOWN TO JAN 1, 2026 00:00 UTC+3 ===
        const countdownEl = document.getElementById('ny-countdown');

        function updateCountdown() {
            const ny2026UTC = Date.UTC(2025, 11, 31, 21, 0, 0);
            const diff = ny2026UTC - Date.now();

            if (diff <= 0) {
                countdownEl.textContent = '–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º 2026!';
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);

            countdownEl.textContent = `–ù–æ–≤—ã–π –ì–æ–¥ —á–µ—Ä–µ–∑: ${days}–¥ ${hours}—á ${mins}–º ${secs}—Å`;
        }

        if (!document.getElementById('ny-snow-style')) {
            const style = document.createElement('style');
            style.id = 'ny-snow-style';
            style.textContent = `
                @keyframes snowfall {
                    0% { transform: translateY(-10vh) rotate(0deg); }
                    100% { transform: translateY(110vh) rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        const terminalInput = document.getElementById('terminal-input');
        const terminalOutput = document.getElementById('terminal-output');

        function printLine(text) {
            const line = document.createElement('div');
            line.textContent = text;
            terminalOutput.appendChild(line);
        }

        function printCommand(command) {
            const line = document.createElement('div');
            line.innerHTML = '<span class="prompt">&gt;</span> ' + command;
            terminalOutput.appendChild(line);
        }

        terminalInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const input = terminalInput.value.trim();
                if (!input) return;

                terminalInput.value = '';
                printCommand(input);

                const [cmd, ...args] = input.split(' ');
                const argStr = args.join(' ').trim();

                if (cmd === 'cd') {
                    if (!argStr) {
                        printLine('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: cd <—Å—Ç—Ä–∞–Ω–∏—Ü–∞>');
                        printLine('–î–æ—Å—Ç—É–ø–Ω–æ: about, projects, fanfics, crypto, account');
                        return;
                    }

                    const aliases = {
                        'about': 'about.html',
                        'projects': 'projects.html',
                        'fanfics': 'fanfics.html',
                        'crypto': 'crypto.html',
                        'account': 'personal_account.html'
                    };

                    const target = aliases[argStr] || null;
                    if (target) {
                        printLine(`–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ ${target}...`);
                        setTimeout(() => window.location.href = target, 500);
                    } else {
                        printLine(`cd: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "${argStr}"`);
                        printLine('–î–æ—Å—Ç—É–ø–Ω–æ: about, projects, fanfics, crypto, account');
                    }

                } else if (cmd === 'goto') {
                    if (!argStr) {
                        printLine('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: goto /–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É.html');
                        return;
                    }

                    let url = argStr;
                    if (!url.startsWith('/')) {
                        url = '/' + url;
                    }

                    try {
                        const testUrl = new URL(url, window.location.origin);
                        if (testUrl.origin !== window.location.origin) {
                            throw new Error('–í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã');
                        }
                        printLine(`–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ ${testUrl.pathname}...`);
                        setTimeout(() => window.location.href = testUrl.pathname, 500);
                    } catch (err) {
                        printLine('goto: –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –ø—É—Ç—å (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)');
                    }

                } else if (cmd === 'time') {
                    const now = new Date().toLocaleString('ru-RU', {
                        timeZone: 'Europe/Moscow',
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    printLine(`–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–ú–°–ö): ${now}`);
                } else if (cmd === 'weather') {
                    printLine('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã –≤ –ú–æ—Å–∫–≤–µ...');

                    fetch('https://wttr.in/Moscow?format=4&lang=ru')
                        .then(response => response.text())
                        .then(data => {
                            terminalOutput.lastChild.remove();
                            printLine('–ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ:');
                            printLine(data.trim());
                        })
                        .catch(() => {
                            terminalOutput.lastChild.remove();
                            printLine('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–≥–æ–¥—É.');
                        });
                } else if (cmd === 'help') {
                    printLine('–ö–æ–º–∞–Ω–¥—ã:');
                    printLine('  cd <—Å—Ç—Ä–∞–Ω–∏—Ü–∞>    ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª (about, projects, –∏ —Ç.–¥.)');
                    printLine('  goto /–ø—É—Ç—å.html  ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –ø—É—Ç–∏');
                    printLine('  time             ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–ú–°–ö)');
                    printLine('  clear            ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª');
                } else if (cmd === 'clear') {
                    terminalOutput.innerHTML = '';

                } else {
                    printLine(`–ö–æ–º–∞–Ω–¥–∞ "${cmd}" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í–≤–µ–¥–∏—Ç–µ "help".`);
                }

                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            }
        });

        terminalInput.focus();

        // === COUNTDOWN TO MAY 31, 2026 ===
        const mayCountdownEl = document.getElementById('may-countdown');

        function updateMayCountdown() {
            const may2026UTC = Date.UTC(2026, 4, 30, 21, 0, 0);
            const now = Date.now();
            const diff = may2026UTC - now;

            if (diff <= 0) {
                mayCountdownEl.textContent = '–î–æ –∫–æ–Ω—Ü–∞ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞!';
            } else {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const secs = Math.floor((diff % (1000 * 60)) / 1000);
                mayCountdownEl.textContent = `–î–æ 31 –º–∞—è: ${days}–¥ ${hours}—á ${mins}–º ${secs}—Å`;
            }
        }

        // === HOLIDAY COUNTDOWN (based on school breaks) ===
        const holidayCountdownEl = document.getElementById('holiday-countdown');

        function updateHolidayCountdown() {
            const now = new Date();
            let currentYear = now.getFullYear();

            const autumnBreakStart = Date.UTC(currentYear, 9, 24, 21); // Oct 25 MSK
            const autumnBreakEnd = Date.UTC(currentYear, 10, 1, 21); // Nov 2 MSK
            const winterBreakStart = Date.UTC(currentYear, 11, 30, 21); // Dec 31 MSK
            const winterBreakEnd = Date.UTC(currentYear + 1, 0, 10, 21); // Jan 11 MSK
            const springBreakStart = Date.UTC(currentYear + 1, 2, 27, 21); // Mar 28 MSK
            const springBreakEnd = Date.UTC(currentYear + 1, 3, 4, 21); // Apr 5 MSK

            const nowUTC = Date.now();
            let holidayText = "";
            let diff = 0;
            let isActive = false;

            if (nowUTC >= autumnBreakStart && nowUTC < autumnBreakEnd) {
                holidayText = "üçÅ –û—Å–µ–Ω–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã! –ó–∞–∫–æ–Ω—á–∞—Ç—Å—è —á–µ—Ä–µ–∑";
                diff = autumnBreakEnd - nowUTC;
                isActive = true;
            } else if (nowUTC >= winterBreakStart && nowUTC < winterBreakEnd) {
                holidayText = "üéÑ –ó–∏–º–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã! –ó–∞–∫–æ–Ω—á–∞—Ç—Å—è —á–µ—Ä–µ–∑";
                diff = winterBreakEnd - nowUTC;
                isActive = true;
            } else if (nowUTC >= springBreakStart && nowUTC < springBreakEnd) {
                holidayText = "üåº –í–µ—Å–µ–Ω–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã! –ó–∞–∫–æ–Ω—á–∞—Ç—Å—è —á–µ—Ä–µ–∑";
                diff = springBreakEnd - nowUTC;
                isActive = true;
            } else {
                let nextStart = autumnBreakStart;
                if (nowUTC >= autumnBreakEnd) nextStart = winterBreakStart;
                if (nowUTC >= winterBreakEnd) nextStart = springBreakStart;
                if (nowUTC >= springBreakEnd) {
                    nextStart = Date.UTC(currentYear + 1, 9, 24, 21);
                }
                diff = nextStart - nowUTC;

                if (nextStart === autumnBreakStart || nextStart === Date.UTC(currentYear + 1, 9, 24, 21)) {
                    holidayText = "–°–ª–µ–¥—É—é—â–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (–û—Å–µ–Ω–Ω–∏–µ) —á–µ—Ä–µ–∑";
                } else if (nextStart === winterBreakStart) {
                    holidayText = "–°–ª–µ–¥—É—é—â–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (–ó–∏–º–Ω–∏–µ) —á–µ—Ä–µ–∑";
                } else if (nextStart === springBreakStart) {
                    holidayText = "–°–ª–µ–¥—É—é—â–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (–í–µ—Å–µ–Ω–Ω–∏–µ) —á–µ—Ä–µ–∑";
                }
            }

            if (diff <= 0) {
                holidayCountdownEl.textContent = "–°—á–∞—Å—Ç–ª–∏–≤—ã—Ö –∫–∞–Ω–∏–∫—É–ª!";
            } else {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                holidayCountdownEl.textContent = `${holidayText} ${days} –¥–Ω–µ–π`;
            }

            holidayCountdownEl.style.color = isActive ? '#ff9800' : '#4fc3dc';
        }

        setInterval(updateMayCountdown, 1000);
        setInterval(updateHolidayCountdown, 60000);

        updateMayCountdown();
        updateHolidayCountdown();
    </script>

</body>

</html>